:root {
    --primary-color: #007bff;
    --border-color: #dee2e6;
    --background-light: #f8f9fa;
    --text-color: #212529;
    --button-disabled-bg: #adb5bd;
    --button-disabled-color: #f8f9fa;
    --page-gutter: 5px; /* 定义全局边距 */
}

/* --- 1. 基础页面和字体布局 --- */
html, body {
    height: 100%;
    margin: 0;
    overflow: hidden; /* 保持页面主体不滚动 */
}

body {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    padding: var(--page-gutter);
    background-color: #f0f2f5;
    color: var(--text-color);
    font-size: 14px;
    box-sizing: border-box;
}

ul {
    list-style-type: none;
    padding-left: 20px;
}

li {
    padding: 4px 0;
}

/* --- 2. 主容器和头部 --- */
.toolbox-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    max-width: none;
}

.toolbox-header {
    padding: 0 0 15px 0;
    flex-shrink: 0;
}

.toolbox-header .title-version {
    display: flex;
    align-items: center;
    gap: 15px;
    flex-wrap: wrap;
}

.toolbox-header h1 {
    font-size: 22px;
    margin: 0;
    color: #333;
}

#version-info {
    font-size: 12px;
    color: #6c757d;
    background-color: #e9ecef;
    padding: 3px 8px;
    border-radius: 5px;
}

.toolbox-header .description {
    font-size: 14px;
    color: #555;
    margin: 0;
    margin-left: 20px;
}

/* --- 3. 标签页导航与内容区 --- */
.tab-navigation {
    display: flex;
    gap: 5px;
    margin-bottom: -1px;
    flex-shrink: 0;
}

.tab-button {
    padding: 8px 16px;
    font-size: 14px;
    font-weight: 500;
    border: 1px solid var(--border-color);
    border-bottom: none;
    background-color: #f8f9fa;
    cursor: pointer;
    border-radius: 8px 8px 0 0;
    transition: all 0.2s ease-in-out;
    white-space: nowrap;
}

.tab-button.active {
    background-color: white;
    color: var(--primary-color);
    border-top: 3px solid var(--primary-color);
    padding-top: 6px; /* 微调以匹配边框高度 */
}

.tab-content {
    background-color: white;
    padding: var(--page-gutter);
    border-radius: 0 8px 8px 8px;
    border: 1px solid var(--border-color);
    flex-grow: 1; /* 关键：填满剩余垂直空间 */
    overflow: hidden; /* 隐藏内部超出的部分，让子元素自己处理滚动 */
    display: flex;
    margin-bottom: var(--page-gutter); /* 确保下方有5px边距 */
}

.tab-panel {
    display: none;
    width: 100%;
}

.tab-panel.active {
    display: flex;
}

/* --- 4. 高校库/专业目录/招生计划页 内部布局 --- */
.app-container {
    display: flex;
    flex-direction: row;
    gap: var(--page-gutter);
    height: 100%;
    width: 100%;
}

.left-panel, .right-panel {
    display: flex;
    flex-direction: column;
    gap: var(--page-gutter);
    height: 100%;
    box-sizing: border-box;
}

.left-panel {
    width: 40%;
    flex-shrink: 0;
}

.right-panel {
    width: 60%;
    flex-shrink: 0;
}

/* 左侧筛选结果滚动框 */
.major-tree-container {
    border: 1px solid var(--border-color);
    padding: 10px;
    border-radius: 8px;
    overflow-y: auto;
    flex-grow: 1; /* 关键：让它填满 .left-panel 的所有剩余空间 */
    min-height: 0; /* 关键：确保滚动条能出现 */
}

/* 右侧详情框 */
.details-content, #plan-details-content {
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 10px;
    overflow-y: auto;
    height: 75%; /* 高度占父容器(.right-panel)的75% */
    box-sizing: border-box;
}

/* 右侧输出框 */
.output-container, #plan-output-container {
    border: 1px solid var(--border-color);
    padding: 10px;
    border-radius: 8px;
    height: 25%; /* 高度占父容器(.right-panel)的25% */
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
}

/* --- 5. 招生计划页 专属布局 --- */
#app-container-plans .left-panel { width: 50%; }
#app-container-plans .right-panel { width: 50%; }
#plan-details-content { height: auto; flex: 40; }
#plan-chart-area { height: auto; flex: 35; border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; }
#plan-output-container { height: auto; flex: 25; padding: 0; border: none; }
#plan-output-container > div { height: 100%; }

/* --- 6. 通用组件样式 --- */
.controls-toolbar { display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; }
.filter-controls { display: flex; flex-wrap: wrap; gap: 10px; }
.filter-group { border: 1px solid #ddd; border-radius: 5px; padding: 5px 8px; position: relative; background-color: #fff; }
.filter-group summary { font-weight: 500; cursor: pointer; padding: 3px 20px 3px 5px; list-style: none; transition: all 0.2s; border-radius: 4px; }
.filter-group summary.filter-active { background-color: var(--primary-color); color: white; }
.filter-group summary.filter-active::after { color: white; }
.filter-group summary::-webkit-details-marker { display: none; }
.filter-group summary::after { content: ' ▼'; font-size: 0.8em; color: #666; position: absolute; right: 8px; top: 50%; transform: translateY(-50%); }
.filter-group[open] summary::after { content: ' ▲'; }
.filter-group .filter-options { position: absolute; background-color: white; border: 1px solid #ccc; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 5px; padding: 10px; margin-top: 5px; z-index: 10; display: flex; flex-direction: column; gap: 8px; max-height: 250px; overflow-y: auto; }
.filter-options label { display: flex; align-items: center; gap: 5px; white-space: nowrap; font-weight: normal; }
.header-controls { display: flex; align-items: center; flex-wrap: nowrap; gap: 10px; flex-shrink: 0; margin-bottom: 10px; }
.header-controls .search-container { display: flex; gap: 8px; flex-grow: 1; }
.switcher { display: flex; border: 1px solid var(--primary-color); border-radius: 8px; overflow: hidden; }
.switcher input[type="radio"] { display: none; }
.switcher label { padding: 8px 12px; font-size: 14px; cursor: pointer; transition: all 0.2s ease-in-out; color: var(--primary-color); user-select: none; white-space: nowrap; }
.switcher input[type="radio"]:checked + label { background-color: var(--primary-color); color: white; }
.switcher label:not(:last-of-type) { border-right: 1px solid var(--primary-color); }
.query-button { padding: 8px 18px; font-size: 14px; background-color: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.2s; white-space: nowrap; }
.query-button:hover { background-color: #0056b3; }
.tree-label, .major-label, .uni-label { cursor: pointer; user-select: none; transition: background-color 0.2s; padding: 2px 4px; border-radius: 3px; }
.tree-label:hover, .major-label:hover, .uni-label:hover { color: var(--primary-color); background-color: #e9f5ff; }
.caret::before { content: "+"; color: black; display: inline-block; margin-right: 8px; font-weight: bold; width: 14px; transition: transform 0.2s; }
.caret-down::before { transform: rotate(45deg); }
.nested { display: none; }
.active { display: block; }
.output-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; flex-shrink: 0;}
.output-header h3 { margin: 0; display: flex; align-items: center; }
.output-button { padding: 8px 12px; font-size: 14px; background-color: var(--primary-color); color: white; border: none; border-radius: 8px; cursor: pointer; transition: background-color 0.2s; white-space: nowrap; }
.output-button:hover { background-color: #0056b3; }
.output-button.disabled { background-color: var(--button-disabled-bg); color: var(--button-disabled-color); cursor: not-allowed; pointer-events: none; }
textarea { width: 100%; box-sizing: border-box; flex-grow: 1; font-size: 13px; padding: 10px; border-radius: 5px; border: 1px solid var(--border-color); resize: none; }
.details-content p { margin: 0 0 4px 0; line-height: 1.5; }
.details-content h3 { margin-top: 0; font-size: 18px; color: var(--primary-color);}
.plan-filters { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 10px; flex-shrink: 0; }
.plan-interactive-controls { display: flex; gap: 10px; margin-bottom: 10px; align-items: stretch; flex-shrink: 0; }
.input-column { display: flex; flex-direction: column; gap: 5px; flex-grow: 1; }
.input-column input, .input-column textarea { padding: 8px 12px; font-size: 14px; font-family: inherit; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; width: 100%; }
.input-column textarea { resize: vertical; }
.button-column { display: flex; flex-direction: column; justify-content: space-between; flex-shrink: 0; gap: 5px; }
.button-column .query-button, .button-column .switcher, .button-column .output-button { width: 100%; box-sizing: border-box; display: flex; justify-content: center; }
.content-placeholder { display: flex; align-items: center; justify-content: center; height: 100%; color: #6c757d; }
#query-results-message { color: var(--primary-color); margin-bottom: 10px; font-weight: 500; }
.plan-list-view { /* 您原有的列表视图样式 */ }
#plan-details-content .detail-label { width: 95px; }
#filter-range .filter-options { width: auto; align-items: center; }

@media (max-width: 1024px) { 
    body { overflow-y: auto; padding: 10px; } 
    .toolbox-container { height: auto; } 
    .app-container { flex-direction: column; } 
    .left-panel, .right-panel { width: 100%; height: auto; max-height: 80vh; } 
    .right-panel { margin-top: 10px; } 
    .tab-navigation { overflow-x: auto; padding-bottom: 5px; } 
}
